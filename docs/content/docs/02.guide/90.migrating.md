---
title: Migration Guide
description: Follow this guide to upgrade from v9.x to v10.x
toc:
  depth: 3
---

## Upgraded to Vue I18n v11
We have upgraded from Vue I18n v10 to v11, this major version bump deprecates the Legacy API mode and custom `v-t` directive and drops `tc` and `$tc` from Legacy API mode.

Check the documentation detailing the breaking changes [here](https://vue-i18n.intlify.dev/guide/migration/breaking11.html).

## General changes
These options and functions have undergone a minor change, they are still available but have been limited in functionality or changed in some other way.

| Option/Function | Reasoning |
|------------------|---------|
 | `restructureDir`{lang="yml"} | It is no longer possible to disable the new directory structure by setting `restructureDir: false`{lang="ts"}.<br><br>We recommend leaving this unset to use the default value of `'i18n'`{lang="ts"}. |
| `baseUrl`{lang="yaml"} | The `baseUrl`{lang="yaml"} option will no longer support function configuration in v11, which will only support string values.<br><br>Use runtime config or rely on multi domain locales to set the base URL for complex setups. |
 | `useLocaleHead()`{lang="ts"} | The `key` property has been removed and can no longer be configured, this is necessary for predictable and consistent localized head tag management. |
 |`$localeHead()`{lang="ts"} | Same as `useLocaleHead()`{lang="ts"}. |

## Configuration options

### Removals
The following options have been removed:

| Option | Reasoning |
|--------|--------|
| `lazy`{lang="yml"} | Lazy loading of locale messages is now the default behavior. |
| `bundle.optimizeTranslationDirective`{lang="yml"} | This feature has been disabled and fully removed, see [the discussion in this issue](https://github.com/nuxt-modules/i18n/issues/3238#issuecomment-2672492536) for context on this change. |
| `experimental.generatedLocaleFilePathFormat`{lang="yml"} | File paths (e.g. locale files, vue-i18n configs) configured for this module are now removed from the build entirely making this option obsolete. |


### Deprecations
The following options have been deprecated and will be removed in v11:

| Option | Reasoning |
|---|---|
| `types`{lang="yml"} | Only `'composition'`{lang="yml"} types will be supported in v11, in line with Vue I18n v12. |
| `routesNameSeparator`{lang="yml"} | This was documented as internal, use cases for end-users are unclear. |
| `defaultLocaleRouteNameSuffix`{lang="yml"} | This was documented as internal, use cases for end-users are unclear. |

### Promotions
These options are stable and are now enabled by default, some have been renamed to better reflect their purpose. 

| Option | Replacement |
|---|---|
| `experimental.hmr`{lang="yml"} | `hmr`{lang="yml"} |
| `experimental.switchLocalePathLinkSSR`{lang="yml"} | This is stable and the option to enable/disable it has been removed. |
| `experimental.autoImportTranslationFunctions`{lang="yml"} | `autoDeclare`{lang="yml"} |

## I18n functions

### Removals
The following i18n functions have been removed from the module, they were deprecated in v9.

| Function | Reasoning |
|---|---|
| `onLanguageSwitched()`{lang="ts"} | This function actually called the hook instead of subscribing to it, leading to unpredictable behavior.<br><br>Use the [`'i18n:languageSwitched'`{lang="ts"}](/docs/guide/runtime-hooks) hook instead. |
| `onBeforeLanguageSwitch()`{lang="ts"} | This function actually called the hook instead of subscribing to it, leading to unpredictable behavior.<br><br>Use the [`'i18n:beforeLanguageSwitch'`{lang="ts"}](/docs/guide/runtime-hooks) hook instead. |


## Context functions

### Removals
The following functions have been removed from the Nuxt context.

| Function | Replacement |
|---|---|
| `$resolveRoute()`{lang="ts"} | Use `$localeRoute()`{lang="ts"} instead |
| `$localeLocation()`{lang="ts"} | Use `$localeRoute()`{lang="ts"} instead |


### Deprecations
These Nuxt context functions have been deprecated and will be removed in v11. 

| Function | Reason for Deprecation / Replacement |
|---|---|
| `$localeHead()`{lang="ts"} | Deprecated due to limited use cases, the `useLocaleHead()`{lang="ts"} composable offers the same functionality and is easier to use in combination with `useHead()`{lang="ts"}. |
| `$getRouteBaseName()`{lang="ts"} | Deprecated in favor of the same function under a new name: `$routeBaseName()`{lang="ts"}, to be consistent with the other context functions and their composable counterparts. |


## Generated options
The generated options files in your projects are meant for internal use by this module at runtime and should never be used, more properties may be removed in the future.

The following exports have been removed from the generated options files (`#build/i18n.options.mjs` and `#internal/i18n/options.mjs`):
| Removed Export | 
|---|
| `isSSG`{lang="yml"} |  
| `hasPages`{lang="yml"} |  
| `parallelPlugin`{lang="yml"} |  
| `nuxtI18nOptions`{lang="yml"} |  
| `DEFAULT_COOKIE_KEY`{lang="yml"} |  
| `DYNAMIC_PARAMS_KEY`{lang="yml"} | 
| `NUXT_I18N_MODULE_ID`{lang="yml"} |  
| `SWITCH_LOCALE_PATH_LINK_IDENTIFIER`{lang="yml"} | 

Reasons for removal: 
* These are no longer used by the module and might expose vulnerable information in the final build
* Some options are now used as static values for better tree-shaking resulting in a smaller project build.

## Runtime config
Several options set in the runtime config were only used to transfer build-time configuration to runtime and changing these at runtime could cause issues.

Instead of setting these on runtime config we now treat them as compiler constants, this way we can tree-shake any unused logic from a project build.

The following options have been removed from runtime config:
| Removed runtime config option |
|---|
| `lazy`{lang="yml"} |
| `strategy`{lang="yml"} |
| `trailingSlash`{lang="yml"} |
| `differentDomains`{lang="yml"} | 
| `defaultDirection`{lang="yml"} |
| `multiDomainLocales`{lang="yml"} |
| `routeNameSeparator`{lang="yml"} |
| `defaultLocaleRouteNameSuffix`{lang="yml"} |

## Legacy migration
The migration guides for v7 and v8 can be found in the [legacy documentation](https://v9.i18n.nuxtjs.org/docs/guide/migrating)
