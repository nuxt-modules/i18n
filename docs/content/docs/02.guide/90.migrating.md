---
title: Migration Guide
description: Follow this guide to upgrade from one major version to the other.
---

## Upgrading from `nuxtjs/i18n` v9.x to v10.x

### Upgrade to Vue I18n v11
We have upgrade from Vue I18n v10 to v11, this major version bump deprecates the Legacy API mode and custom `v-t` directive and drops `tc` and `$tc` from Legacy API mode.

Check the documentation detailing the breaking changes [here](https://vue-i18n.intlify.dev/guide/migration/breaking11.html).

### Lazy load locale messages by default and removed `lazy` option
The `lazy` option has been removed and lazy loading of locale messages is now the default behavior.

### Option default changed `useLocaleHead()`{lang="ts"} and `$localeHead()`{lang="ts"}
The default value for the `key` property has been changed from `'hid'` to `'key'`.

### Deprecate `$localeHead()`{lang="ts"}
The `$localeHead()`{lang="ts"} Nuxt context function has been deprecated and will be removed in v11. 

This context function has limited use cases, the `useLocaleHead` composable offers the same functionality and is easier to use in combination with `useHead`.

### Deprecate `$getRouteBaseName()`{lang="ts"} in favor of `$routeBaseName()`{lang="ts"}
The `$getRouteBaseName()`{lang="ts"} Nuxt context function has been deprecated and will be removed in v11. 

We are renaming this function to `$routeBaseName()`{lang="ts"} to be consistent with the other context functions and their composable counterparts.

### Promote `experimental.autoImportTranslationFunctions` to `autoDeclare`
This functionality is stable and is now enabled by default, the option has been moved out of the `experimental` configuration object and renamed to `autoDeclare`.

### Promote `experimental.switchLocalePathLinkSSR`
This functionality is stable and is now enabled by default and the option to enable/disable it has been removed.

### Promote `experimental.hmr` to `hmr`
The HMR functionality is stable, it was already enabled by default but to reflect its stability it has been moved out of the `experimental` configuration object.

### Remove `restructureDir` migration path
To ease migration in v9 it was possible to disable the new directory structure by setting `restructureDir: false`, this has now been removed and we recommend using the default value of `'i18n'`.

### Dropped Nuxt context functions

The following functions have been removed from the Nuxt context.
* `$resolveRoute()`{lang="ts"}
* `$localeLocation()`{lang="ts"}

Steps to migrate
* `$resolveRoute()`{lang="ts"} -> use `$localeRoute()` instead
* `$localeLocation()`{lang="ts"} -> use `$localeRoute()` instead

### Drop `bundle.optimizeTranslationDirective`
This feature has been disabled and the option to enable it has been removed, see [the discussion in this issue](https://github.com/nuxt-modules/i18n/issues/3238#issuecomment-2672492536) for context on this change.

### Drop `experimental.generatedLocaleFilePathFormat`
File paths (e.g. locale files, vue-i18n configs) configured for this module are now removed entirely making this option obsolete.

### Removed exports from generated options files.
The generated options files in your projects are meant for internal use by this module at runtime and should never be used, more properties may be removed in the future.

The following exports have been removed from the generated options files (`#build/i18n.options.mjs` and `#internal/i18n/options.mjs`):
* `nuxtI18nOptions`
* `NUXT_I18N_MODULE_ID`
* `parallelPlugin`
* `isSSG`
* `hasPages`
* `DEFAULT_COOKIE_KEY`
* `DYNAMIC_PARAMS_KEY`
* `SWITCH_LOCALE_PATH_LINK_IDENTIFIER`

Reasons for removal: 
* These are no longer used by the module and might expose vulnerable information in the final build
* Some options are now used as static values for better tree-shaking resulting in a smaller project build.

### Removed options from runtime config
Several options set in the runtime config were only used to transfer build-time configuration to runtime and changing these at runtime could cause issues.

Instead of setting these on runtime config we now treat them as compiler constants, this way we can tree-shake any unused logic from a project build.

The following options have been removed from runtime config:
* `defaultDirection`
* `strategy`
  * You can access this on `useI18n()`{lang="ts"} or `$i18n`{lang="ts"}
* `lazy`
* `routeNameSeparator`
* `defaultLocaleRouteNameSuffix`
* `differentDomains`
* `multiDomainLocales`
  * Enabling this requires certain properties on locales at build-time, we do not see the use case for setting this at runtime.
* `trailingSlash`


## Upgrading from earlier versions
The migration guides for v7 and v8 can be found in the [legacy documentation](https://v9.i18n.nuxtjs.org/docs/guide/migrating)
